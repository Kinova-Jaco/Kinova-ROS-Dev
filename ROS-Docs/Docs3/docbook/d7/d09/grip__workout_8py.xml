<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d7/d09/grip__workout_8py">
    <title>grip_workout.py File Reference</title>
<para>Include dependency diagram for grip_workout.py</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d9/df5/grip__workout_8py__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for grip_workout.py</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d6/dc7/grip__workout_8py__dep__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
        <simplesect>
            <title> Namespaces </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d0/d38/namespacegrip__workout">grip_workout</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </simplesect>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file D:/Longfei/Desktop/catkin_KinovaROS/src/jaco-ros/jaco_demo/nodes/jaco_demo/grip_workout.py</para>
    </simplesect>
    <literallayout><computeroutput>
<link linkend="d0/d38/namespacegrip__workout">1 </link><emphasis class="comment">#!&#32;/usr/bin/env&#32;python</emphasis>
2 <emphasis class="stringliteral">&quot;&quot;&quot;A&#32;helper&#32;program&#32;to&#32;test&#32;gripper&#32;goals&#32;for&#32;the&#32;JACO&#32;and&#32;MICO&#32;arms.&quot;&quot;&quot;</emphasis>
3 
4 <emphasis class="keyword">import</emphasis>&#32;roslib;&#32;roslib.load_manifest(<emphasis class="stringliteral">&apos;jaco_demo&apos;</emphasis>)
5 <emphasis class="keyword">import</emphasis>&#32;rospy
6 
7 <emphasis class="keyword">import</emphasis>&#32;sys
8 
9 <emphasis class="keyword">import</emphasis>&#32;actionlib
10 <emphasis class="keyword">import</emphasis>&#32;<link linkend="d2/dbe/namespacejaco__msgs_1_1msg">jaco_msgs.msg</link>
11 
12 <emphasis class="keyword">import</emphasis>&#32;goal_generators
13 
14 
<link linkend="d0/d38/namespacegrip__workout_1a5c14bb069a6ceb0f3854520cc298a2c1">15 </link><emphasis class="keyword">def&#32;</emphasis><link linkend="d0/d38/namespacegrip__workout_1a5c14bb069a6ceb0f3854520cc298a2c1">gripper_client</link>(finger_positions):
16 &#32;&#32;&#32;&#32;<emphasis class="stringliteral">&quot;&quot;&quot;Send&#32;a&#32;gripper&#32;goal&#32;to&#32;the&#32;action&#32;server.&quot;&quot;&quot;</emphasis>
17 &#32;&#32;&#32;&#32;action_address&#32;=&#32;<emphasis class="stringliteral">&apos;/&apos;</emphasis>&#32;+&#32;str(sys.argv[1])&#32;+&#32;<emphasis class="stringliteral">&apos;_arm_driver/fingers/finger_positions&apos;</emphasis>
18 &#32;&#32;&#32;&#32;client&#32;=&#32;actionlib.SimpleActionClient(action_address,
19 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d9/d28/classjaco__msgs_1_1msg_1_1__SetFingersPositionAction_1_1SetFingersPositionAction">jaco_msgs.msg.SetFingersPositionAction</link>)
20 &#32;&#32;&#32;&#32;client.wait_for_server()
21 
22 &#32;&#32;&#32;&#32;goal&#32;=&#32;<link linkend="d7/dbc/classjaco__msgs_1_1msg_1_1__SetFingersPositionGoal_1_1SetFingersPositionGoal">jaco_msgs.msg.SetFingersPositionGoal</link>()
23 &#32;&#32;&#32;&#32;goal.fingers.finger1&#32;=&#32;float(finger_positions[0])
24 &#32;&#32;&#32;&#32;goal.fingers.finger2&#32;=&#32;float(finger_positions[1])
25 
26 &#32;&#32;&#32;&#32;<emphasis class="comment">#&#32;The&#32;MICO&#32;arm&#32;has&#32;only&#32;two&#32;fingers,&#32;but&#32;the&#32;same&#32;action&#32;definition&#32;is&#32;used</emphasis>
27 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;len(finger_positions)&#32;&lt;&#32;3:
28 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;goal.fingers.finger3&#32;=&#32;0.0
29 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>:
30 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;goal.fingers.finger3&#32;=&#32;float(finger_positions[2])
31 
32 &#32;&#32;&#32;&#32;client.send_goal(goal)
33 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;client.wait_for_result(rospy.Duration(5.0)):
34 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;client.get_result()
35 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>:
36 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;client.cancel_all_goals()
37 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;the&#32;gripper&#32;action&#32;timed-out&apos;</emphasis>)
38 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keywordtype">None</emphasis>
39 
40 
41 <emphasis class="keywordflow">if</emphasis>&#32;__name__&#32;==&#32;<emphasis class="stringliteral">&apos;__main__&apos;</emphasis>:
42 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(len(sys.argv)&#32;<emphasis class="keywordflow">not</emphasis>&#32;<emphasis class="keywordflow">in</emphasis>&#32;[4,&#32;5]&#32;<emphasis class="keywordflow">or</emphasis>
43 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="stringliteral">&apos;help&apos;</emphasis>&#32;<emphasis class="keywordflow">in</emphasis>&#32;str(sys.argv)&#32;<emphasis class="keywordflow">or</emphasis>
44 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;str(sys.argv[1])&#32;<emphasis class="keywordflow">not</emphasis>&#32;<emphasis class="keywordflow">in</emphasis>&#32;[<emphasis class="stringliteral">&apos;jaco&apos;</emphasis>,&#32;<emphasis class="stringliteral">&apos;mico&apos;</emphasis>]):
45 
46 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Usage:&apos;</emphasis>)
47 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;&#32;&#32;&#32;&#32;grip_workout.py&#32;jaco&#32;random&#32;num&#32;&#32;&#32;-&#32;randomly&#32;generate&#32;num&#32;poses&apos;</emphasis>)
48 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;&#32;&#32;&#32;&#32;grip_workout.py&#32;jaco&#32;f1&#32;f2&#32;f3&#32;&#32;&#32;&#32;&#32;-&#32;use&#32;that&#32;specific&#32;pose&apos;</emphasis>)
49 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;&#32;&#32;&#32;&#32;grip_workout.py&#32;mico&#32;f1&#32;f2&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;use&#32;that&#32;specific&#32;pose&apos;</emphasis>)
50 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;exit()
51 
52 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">try</emphasis>:
53 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rospy.init_node(str(sys.argv[1])&#32;+&#32;<emphasis class="stringliteral">&apos;_gripper_workout&apos;</emphasis>)
54 
55 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;str(sys.argv[2])&#32;==&#32;<emphasis class="stringliteral">&apos;random&apos;</emphasis>&#32;<emphasis class="keywordflow">and</emphasis>&#32;len(sys.argv)&#32;==&#32;4:
56 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Using&#32;{}&#32;randomly&#32;generated&#32;finger&#32;positions&apos;</emphasis>.format(int(sys.argv[3])))
57 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;str(sys.argv[1])&#32;==&#32;<emphasis class="stringliteral">&apos;jaco&apos;</emphasis>:
<link linkend="d0/d38/namespacegrip__workout_1a3deafc04ebe19165cfdc795ba4f53692">58 </link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;positions&#32;=&#32;<link linkend="df/da8/namespacegoal__generators_1a2b395bfee98a60349c6a7193e8d3059f">goal_generators.random_jaco_finger_positions</link>(int(sys.argv[3]))
59 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>:
60 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;positions&#32;=&#32;<link linkend="df/da8/namespacegoal__generators_1a092d3fe84232b5b0ead199e6d5a822eb">goal_generators.random_mico_finger_positions</link>(int(sys.argv[3]))
61 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">elif</emphasis>&#32;str(sys.argv[1])&#32;==&#32;<emphasis class="stringliteral">&apos;jaco&apos;</emphasis>&#32;<emphasis class="keywordflow">and</emphasis>&#32;len(sys.argv)&#32;==&#32;5:
62 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Using&#32;the&#32;specified&#32;JACO&#32;finger&#32;positions:&apos;</emphasis>)
<link linkend="d0/d38/namespacegrip__workout_1a2e28cab9dcd884944ac12b695ad4a773">63 </link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;raw_positions&#32;=&#32;[float(n)&#32;<emphasis class="keywordflow">for</emphasis>&#32;n&#32;<emphasis class="keywordflow">in</emphasis>&#32;sys.argv[2:]]
64 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;positions&#32;=&#32;[raw_positions]
65 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">elif</emphasis>&#32;str(sys.argv[1])&#32;==&#32;<emphasis class="stringliteral">&apos;mico&apos;</emphasis>&#32;<emphasis class="keywordflow">and</emphasis>&#32;len(sys.argv)&#32;==&#32;4:
66 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Using&#32;the&#32;specified&#32;MICO&#32;finger&#32;positions:&apos;</emphasis>)
67 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;raw_positions&#32;=&#32;[float(n)&#32;<emphasis class="keywordflow">for</emphasis>&#32;n&#32;<emphasis class="keywordflow">in</emphasis>&#32;sys.argv[2:]]
68 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;positions&#32;=&#32;[raw_positions]
69 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>:
70 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Could&#32;not&#32;parse&#32;arguments,&#32;use&#32;gripper_workout.py&#32;help&#32;to&#32;see&#32;examples&apos;</emphasis>)
71 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;positions&#32;=&#32;[]&#32;&#32;<emphasis class="comment">#&#32;Get&#32;rid&#32;of&#32;static&#32;analysis&#32;warning&#32;that&#32;doesn&apos;t&#32;see&#32;the&#32;exit()</emphasis>
72 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;exit()
73 
74 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">for</emphasis>&#32;position&#32;<emphasis class="keywordflow">in</emphasis>&#32;positions:
75 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;&#32;&#32;&#32;&#32;position:&#32;{}&apos;</emphasis>.format(position))
<link linkend="d0/d38/namespacegrip__workout_1ac8e857bea751845a9f8c3f34d4fa3399">76 </link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;result&#32;=&#32;<link linkend="d0/d38/namespacegrip__workout_1a5c14bb069a6ceb0f3854520cc298a2c1">gripper_client</link>(position)
77 
78 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis class="stringliteral">&apos;Done!&apos;</emphasis>)
79 
80 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">except</emphasis>&#32;rospy.ROSInterruptException:
81 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">print</emphasis>&#32;<emphasis class="stringliteral">&quot;program&#32;interrupted&#32;before&#32;completion&quot;</emphasis>
    </computeroutput></literallayout>
</section>
