<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d9/d79/jaco__arm_8cpp">
    <title>jaco_arm.cpp File Reference</title>
    <programlisting>#include &quot;jaco_driver/jaco_arm.h&quot;</programlisting>
    <programlisting>#include &lt;string&gt;</programlisting>
    <programlisting>#include &lt;vector&gt;</programlisting>
<para>Include dependency diagram for jaco_arm.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../df/d6e/jaco__arm_8cpp__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
<para>Included by dependency diagram for jaco_arm.cpp</para>
<para>
    <figure>
        <title>Dependency diagram</title>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="1" fileref="../../d4/ddc/jaco__arm_8cpp__dep__incl.png"></imagedata>
            </imageobject>
        </mediaobject>
    </figure>
</para>
        <simplesect>
            <title> Namespaces </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03">anonymous_namespace{jaco_arm.cpp}</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d4/d3c/namespacejaco">jaco</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </simplesect>
        <section>
            <title>Macros</title>
            <para>
                <itemizedlist>
                    <listitem>
                            <para>#define <link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link> 3.14159265359</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file D:/Longfei/Desktop/catkin_KinovaROS/src/jaco-ros/jaco_driver/src/jaco_arm.cpp</para>
    </simplesect>
    <literallayout><computeroutput>
1 <emphasis class="comment">//============================================================================</emphasis>
2 <emphasis class="comment">//&#32;Name&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;jaco_arm.cpp</emphasis>
3 <emphasis class="comment">//&#32;Author&#32;&#32;&#32;&#32;&#32;&#32;:&#32;WPI,&#32;Clearpath&#32;Robotics</emphasis>
4 <emphasis class="comment">//&#32;Version&#32;&#32;&#32;&#32;&#32;:&#32;0.5</emphasis>
5 <emphasis class="comment">//&#32;Copyright&#32;&#32;&#32;:&#32;BSD</emphasis>
6 <emphasis class="comment">//&#32;Description&#32;:&#32;A&#32;ROS&#32;driver&#32;for&#32;controlling&#32;the&#32;Kinova&#32;Jaco&#32;robotic&#32;manipulator&#32;arm</emphasis>
7 <emphasis class="comment">//============================================================================</emphasis>
8 
9 <emphasis class="preprocessor">#include&#32;&quot;<link linkend="d8/d35/jaco__arm_8h">jaco_driver/jaco_arm.h</link>&quot;</emphasis>
10 <emphasis class="preprocessor">#include&#32;&lt;string&gt;</emphasis>
11 <emphasis class="preprocessor">#include&#32;&lt;vector&gt;</emphasis>
12 
<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">13 </link><emphasis class="preprocessor">#define&#32;PI&#32;3.14159265359</emphasis>
14 
15 
<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03">16 </link><emphasis class="keyword">namespace&#32;</emphasis>
17 {
<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a9f7f76b13899f576139e087e1c98e7e8">20 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">inline</emphasis>&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(<emphasis class="keywordtype">double</emphasis>&amp;&#32;qd)
21 &#32;&#32;&#32;&#32;{
22 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keyword">static</emphasis>&#32;<emphasis class="keyword">const</emphasis>&#32;<emphasis class="keywordtype">double</emphasis>&#32;PI_180&#32;=&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180.0);
23 
24 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Angle&#32;velocities&#32;from&#32;the&#32;API&#32;are&#32;0..180&#32;for&#32;positive&#32;values,</emphasis>
25 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;and&#32;360..181&#32;for&#32;negative&#32;ones,&#32;in&#32;a&#32;kind&#32;of&#32;2-complement&#32;setup.</emphasis>
26 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(qd&#32;&gt;&#32;180.0)&#32;{
27 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;qd&#32;-=&#32;360.0;
28 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
29 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;qd&#32;*=&#32;PI_180;
30 &#32;&#32;&#32;&#32;}
31 
<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1aea041ba3dd96c1c67a3bcaf95fe8f6f9">32 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">inline</emphasis>&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(std::vector&lt;double&gt;&amp;&#32;qds)
33 &#32;&#32;&#32;&#32;{
34 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">for</emphasis>&#32;(<emphasis class="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;qds.size();&#32;++i)&#32;{
35 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordtype">double</emphasis>&amp;&#32;qd&#32;=&#32;qds[i];
36 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(qd);
37 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
38 &#32;&#32;&#32;&#32;}
39 
<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">40 </link>&#32;&#32;&#32;&#32;<emphasis class="keyword">inline</emphasis>&#32;<emphasis class="keywordtype">void</emphasis>&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(geometry_msgs::Vector3&amp;&#32;qds)
41 &#32;&#32;&#32;&#32;{
42 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(qds.x);
43 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(qds.y);
44 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(qds.z);
45 &#32;&#32;&#32;&#32;}
46 }
47 
48 <emphasis class="keyword">namespace&#32;</emphasis><link linkend="d4/d3c/namespacejaco">jaco</link>
49 {
50 
<link linkend="d3/d95/classjaco_1_1JacoArm_1ab29d25cb3b4bafdc523cbe271c801681">51 </link><link linkend="d3/d95/classjaco_1_1JacoArm_1ab29d25cb3b4bafdc523cbe271c801681">JacoArm::JacoArm</link>(<link linkend="d5/d2b/classjaco_1_1JacoComm">JacoComm</link>&#32;&amp;arm,&#32;<emphasis class="keyword">const</emphasis>&#32;ros::NodeHandle&#32;&amp;nodeHandle)
52 &#32;&#32;&#32;&#32;:&#32;jaco_comm_(arm),&#32;node_handle_(nodeHandle)
53 {
54 &#32;&#32;&#32;&#32;<emphasis class="comment">/*&#32;Set&#32;up&#32;Services&#32;*/</emphasis>
55 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a43eca41486bfa5f012085d3bb02ac7ca">stop_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/stop&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a14ddcea579804fbbd3fb11643bc91e78">JacoArm::stopServiceCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
56 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a7003937a11db04de838d05de05d29481">start_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/start&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0b59f245a5ca363c52dcbc211f20fa64">JacoArm::startServiceCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
57 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1af025f6af7b63a3dd5ce18a31b082eec3">homing_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/home_arm&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0296802ee4994977c35532077dd28a44">JacoArm::homeArmServiceCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
58 
59 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a65f6584b95beb04af852cba7d953fdc3">set_force_control_params_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/set_force_control_params&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a7a5b8120d770ed6ab0bd4593213de712">JacoArm::setForceControlParamsCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
60 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aaf2a407b08e3982c463bbcf364be2dfa">start_force_control_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/start_force_control&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a6c96a5dcf017d0b054048e7765cd3f38">JacoArm::startForceControlCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
61 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1af20526f276fc6708aacec52ca08ad189">stop_force_control_service_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertiseService(<emphasis class="stringliteral">&quot;in/stop_force_control&quot;</emphasis>,&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0ddc9f2458a2c5e17e095b03b72699dc">JacoArm::stopForceControlCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
62 &#32;&#32;&#32;&#32;
63 &#32;&#32;&#32;&#32;<emphasis class="comment">/*&#32;Set&#32;up&#32;Publishers&#32;*/</emphasis>
64 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a074f24a17f50b88921a9bc9d8e52c09b">joint_angles_publisher_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertise&lt;<link linkend="d7/dda/structjaco__msgs_1_1JointAngles__">jaco_msgs::JointAngles</link>&gt;(<emphasis class="stringliteral">&quot;out/joint_angles&quot;</emphasis>,&#32;2);
65 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a914eb71a6de747a2e63b880b2a0ac0b4">joint_state_publisher_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertise&lt;sensor_msgs::JointState&gt;(<emphasis class="stringliteral">&quot;out/joint_state&quot;</emphasis>,&#32;2);
66 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9d6b0687a753f44ecdb2e93aeeddd288">tool_position_publisher_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertise&lt;geometry_msgs::PoseStamped&gt;(<emphasis class="stringliteral">&quot;out/tool_position&quot;</emphasis>,&#32;2);
67 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1abff4dc1bbe63e0be7cd20ac7c4d37be4">tool_wrench_publisher_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertise&lt;geometry_msgs::WrenchStamped&gt;(<emphasis class="stringliteral">&quot;out/tool_wrench&quot;</emphasis>,&#32;2);
68 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a323990f9bd26de33240df3f107e29a49">finger_position_publisher_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.advertise&lt;<link linkend="df/d79/structjaco__msgs_1_1FingerPosition__">jaco_msgs::FingerPosition</link>&gt;(<emphasis class="stringliteral">&quot;out/finger_position&quot;</emphasis>,&#32;2);
69 
70 &#32;&#32;&#32;&#32;<emphasis class="comment">/*&#32;Set&#32;up&#32;Subscribers*/</emphasis>
71 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a531289127704e9ffb5055cc58d3f90f8">joint_velocity_subscriber_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.subscribe(<emphasis class="stringliteral">&quot;in/joint_velocity&quot;</emphasis>,&#32;1,
72 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2c2cfc44e480845bbf7e78c6bfe454b6">JacoArm::jointVelocityCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
73 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a7598c2dfaa6677241e490eb42f175a3b">cartesian_velocity_subscriber_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.subscribe(<emphasis class="stringliteral">&quot;in/cartesian_velocity&quot;</emphasis>,&#32;1,
74 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a091f2eaffef84362f69e3b49482982db">JacoArm::cartesianVelocityCallback</link>,&#32;<emphasis class="keyword">this</emphasis>);
75 
76 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;<emphasis class="keywordtype">double</emphasis>&gt;(<emphasis class="stringliteral">&quot;status_interval_seconds&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa44e18590ad8352a058df6abbd4a3c3b">status_interval_seconds_</link>,&#32;0.1);
77 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;<emphasis class="keywordtype">double</emphasis>&gt;(<emphasis class="stringliteral">&quot;joint_angular_vel_timeout&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac27941dace9da942beeff70926cc736e">joint_vel_timeout_seconds_</link>,&#32;0.25);
78 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;<emphasis class="keywordtype">double</emphasis>&gt;(<emphasis class="stringliteral">&quot;cartesian_vel_timeout&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a822ad8d6fcc8719c5a090456998e832a">cartesian_vel_timeout_seconds_</link>,&#32;0.25);
79 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;<emphasis class="keywordtype">double</emphasis>&gt;(<emphasis class="stringliteral">&quot;joint_angular_vel_timeout&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a832938e80c91ce57ec241a1429133926">joint_vel_interval_seconds_</link>,&#32;0.1);
80 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;<emphasis class="keywordtype">double</emphasis>&gt;(<emphasis class="stringliteral">&quot;cartesian_vel_timeout&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa111ac63977d9a50b7e707b4a9e75e20">cartesian_vel_interval_seconds_</link>,&#32;0.01);
81 
82 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param&lt;std::string&gt;(<emphasis class="stringliteral">&quot;tf_prefix&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a4f7d75d1cfcf82b4221e6bd6e4412cf9">tf_prefix_</link>,&#32;<emphasis class="stringliteral">&quot;jaco_&quot;</emphasis>);
83 
84 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Approximative&#32;conversion&#32;ratio&#32;from&#32;finger&#32;position&#32;(0..6000)&#32;to&#32;joint&#32;angle&#32;</emphasis>
85 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;in&#32;radians&#32;(0..0.7).</emphasis>
86 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param(<emphasis class="stringliteral">&quot;finger_angle_conv_ratio&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a45f8b1fbeec4d1abfcad6d3f9e65b6ca">finger_conv_ratio_</link>,&#32;0.7&#32;/&#32;5000.0);
87 
88 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Depending&#32;on&#32;the&#32;API&#32;version,&#32;the&#32;arm&#32;might&#32;return&#32;velocities&#32;in&#32;the</emphasis>
89 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;0..360&#32;range&#32;(0..180&#32;for&#32;positive&#32;values,&#32;181..360&#32;for&#32;negative&#32;ones).</emphasis>
90 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;This&#32;indicates&#32;that&#32;the&#32;ROS&#32;node&#32;should&#32;convert&#32;them&#32;first&#32;before</emphasis>
91 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;updating&#32;the&#32;joint_state&#32;topic.</emphasis>
92 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.param(<emphasis class="stringliteral">&quot;convert_joint_velocities&quot;</emphasis>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a20deb1358ca2385fcf9dca3f0f771409">convert_joint_velocities_</link>,&#32;<emphasis class="keyword">true</emphasis>);
93 
94 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>.resize(<link linkend="d4/d3c/namespacejaco_1a842fe600d7cc8aba974c8e39e0d88399">JACO_JOINTS_COUNT</link>);
95 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[0]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_1&quot;</emphasis>;
96 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[1]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_2&quot;</emphasis>;
97 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[2]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_3&quot;</emphasis>;
98 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[3]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_4&quot;</emphasis>;
99 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[4]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_5&quot;</emphasis>;
100 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[5]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_6&quot;</emphasis>;
101 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[6]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_finger_1&quot;</emphasis>;
102 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[7]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_finger_2&quot;</emphasis>;
103 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>[8]&#32;=&#32;tf_prefix_&#32;+&#32;<emphasis class="stringliteral">&quot;joint_finger_3&quot;</emphasis>;
104 
105 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac11bbbecb7bebfef8b77d31b0294017a">status_timer_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.createTimer(ros::Duration(status_interval_seconds_),
106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a3a04586ffe92b995c58c9fa94a030bf8">JacoArm::statusTimer</link>,&#32;<emphasis class="keyword">this</emphasis>);
107 
108 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac4ad9c07f3a173e89d6767ec7a2dba12">joint_vel_timer_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.createTimer(ros::Duration(joint_vel_interval_seconds_),
109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0897025ed2834e5802e504b64d67a88b">JacoArm::jointVelocityTimer</link>,&#32;<emphasis class="keyword">this</emphasis>);
110 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac4ad9c07f3a173e89d6767ec7a2dba12">joint_vel_timer_</link>.stop();
111 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a27effbbd66cd47378b49995cf80b8ffb">joint_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">false</emphasis>;
112 
113 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a11e0ed71d6c21e5df7e88fd6ab61df95">cartesian_vel_timer_</link>&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1aa8b6a99580f2ccf8a5c509cc0f3b3c8e">node_handle_</link>.createTimer(ros::Duration(cartesian_vel_interval_seconds_),
114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&amp;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0effe31602b4af803cff1566a358fdfb">JacoArm::cartesianVelocityTimer</link>,&#32;<emphasis class="keyword">this</emphasis>);
115 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a11e0ed71d6c21e5df7e88fd6ab61df95">cartesian_vel_timer_</link>.stop();
116 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a17701f668a0b3ea2accf6c5fb420e012">cartesian_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">false</emphasis>;
117 
118 &#32;&#32;&#32;&#32;ROS_INFO(<emphasis class="stringliteral">&quot;The&#32;arm&#32;is&#32;ready&#32;to&#32;use.&quot;</emphasis>);
119 
120 
121 }
122 
123 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a77535c062ca1d8e11b11e691bb1ee0da">124 </link><link linkend="d3/d95/classjaco_1_1JacoArm_1a77535c062ca1d8e11b11e691bb1ee0da">JacoArm::~JacoArm</link>()
125 {
126 }
127 
128 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a0296802ee4994977c35532077dd28a44">129 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0296802ee4994977c35532077dd28a44">JacoArm::homeArmServiceCallback</link>(<link linkend="de/dcb/structjaco__msgs_1_1HomeArmRequest__">jaco_msgs::HomeArm::Request</link>&#32;&amp;req,&#32;<link linkend="d8/d71/structjaco__msgs_1_1HomeArmResponse__">jaco_msgs::HomeArm::Response</link>&#32;&amp;res)
130 {
131 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a38c69b22bc293afd3f27eff9179dec4c">homeArm</link>();
132 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a787f049f83d8f5fa5a7c86ee6a1d0a11">initFingers</link>();
133 &#32;&#32;&#32;&#32;res.<link linkend="d8/d71/structjaco__msgs_1_1HomeArmResponse___1a2efd00ce949c689141e24a0c2feac589">homearm_result</link>&#32;=&#32;<emphasis class="stringliteral">&quot;JACO&#32;ARM&#32;HAS&#32;BEEN&#32;RETURNED&#32;HOME&quot;</emphasis>;
134 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
135 }
136 
137 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a2c2cfc44e480845bbf7e78c6bfe454b6">138 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2c2cfc44e480845bbf7e78c6bfe454b6">JacoArm::jointVelocityCallback</link>(<emphasis class="keyword">const</emphasis>&#32;<link linkend="d7/dba/namespacejaco__msgs_1aab606d270e36965850c5e08ce8073242">jaco_msgs::JointVelocityConstPtr</link>&amp;&#32;joint_vel)
139 {
140 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(!<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a872b8033cda5a9fe4ccdca2e89aa03d1">isStopped</link>())
141 &#32;&#32;&#32;&#32;{
142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a5fc555c085bddc82c33a3039fbc40932">Actuator1</link>&#32;=&#32;joint_vel-&gt;joint1;
143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1ab7b9349eef239f9741d9c28a795e4c35">Actuator2</link>&#32;=&#32;joint_vel-&gt;joint2;
144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a30426eab94c82cfd3d697bbc8c506c2a">Actuator3</link>&#32;=&#32;joint_vel-&gt;joint3;
145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a46a1314c4846de6a495310b44fe5e0c3">Actuator4</link>&#32;=&#32;joint_vel-&gt;joint4;
146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a953c29d2481eb1c42c84e9c992d34dde">Actuator5</link>&#32;=&#32;joint_vel-&gt;joint5;
147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1ab54771129d8a9e451c27942dd349340d">Actuator6</link>&#32;=&#32;joint_vel-&gt;joint6;
148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a36758d949907e58807d6d4c3792a01df">last_joint_vel_cmd_time_</link>&#32;=&#32;ros::Time().now();
149 
150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(<link linkend="d3/d95/classjaco_1_1JacoArm_1a27effbbd66cd47378b49995cf80b8ffb">joint_vel_timer_flag_</link>&#32;==&#32;<emphasis class="keyword">false</emphasis>)
151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac4ad9c07f3a173e89d6767ec7a2dba12">joint_vel_timer_</link>.start();
153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a27effbbd66cd47378b49995cf80b8ffb">joint_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">true</emphasis>;
154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
155 &#32;&#32;&#32;&#32;}
156 }
157 
158 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a14ddcea579804fbbd3fb11643bc91e78">165 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a14ddcea579804fbbd3fb11643bc91e78">JacoArm::stopServiceCallback</link>(<link linkend="db/d9b/structjaco__msgs_1_1StopRequest__">jaco_msgs::Stop::Request</link>&#32;&amp;req,&#32;<link linkend="d3/d1d/structjaco__msgs_1_1StopResponse__">jaco_msgs::Stop::Response</link>&#32;&amp;res)
166 {
167 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a54862830cd6414ae3ae48e46e54bf798">stopAPI</link>();
168 &#32;&#32;&#32;&#32;res.<link linkend="d3/d1d/structjaco__msgs_1_1StopResponse___1a9dc418ecf2ecbae176732d3fdf6e7b66">stop_result</link>&#32;=&#32;<emphasis class="stringliteral">&quot;Arm&#32;stopped&quot;</emphasis>;
169 &#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Arm&#32;stop&#32;requested&quot;</emphasis>);
170 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
171 }
172 
173 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a0b59f245a5ca363c52dcbc211f20fa64">179 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0b59f245a5ca363c52dcbc211f20fa64">JacoArm::startServiceCallback</link>(<link linkend="d3/ded/structjaco__msgs_1_1StartRequest__">jaco_msgs::Start::Request</link>&#32;&amp;req,&#32;<link linkend="df/dc7/structjaco__msgs_1_1StartResponse__">jaco_msgs::Start::Response</link>&#32;&amp;res)
180 {
181 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a6b2a1fabc4e6c30da42c9a5e26757398">startAPI</link>();
182 &#32;&#32;&#32;&#32;res.<link linkend="df/dc7/structjaco__msgs_1_1StartResponse___1ada6cfbcf90a2ab058b01adf0b079515c">start_result</link>&#32;=&#32;<emphasis class="stringliteral">&quot;Arm&#32;started&quot;</emphasis>;
183 &#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Arm&#32;start&#32;requested&quot;</emphasis>);
184 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
185 }
186 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a7a5b8120d770ed6ab0bd4593213de712">187 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a7a5b8120d770ed6ab0bd4593213de712">JacoArm::setForceControlParamsCallback</link>(<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest__">jaco_msgs::SetForceControlParams::Request</link>&#32;&amp;req,&#32;<link linkend="df/dd2/structjaco__msgs_1_1SetForceControlParamsResponse__">jaco_msgs::SetForceControlParams::Response</link>&#32;&amp;res)
188 {
189 &#32;&#32;&#32;&#32;<link linkend="dd/d00/structCartesianInfo">CartesianInfo</link>&#32;inertia,&#32;damping,&#32;force_min,&#32;force_max;
190 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a1163bd5470638964c3bd0f3146617695">inertia_linear</link>.x;
191 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a1163bd5470638964c3bd0f3146617695">inertia_linear</link>.y;
192 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a1163bd5470638964c3bd0f3146617695">inertia_linear</link>.z;
193 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aee7ba36455fcb2b5ea168a5bf6331b7b">inertia_angular</link>.x;
194 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aee7ba36455fcb2b5ea168a5bf6331b7b">inertia_angular</link>.y;
195 &#32;&#32;&#32;&#32;inertia.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aee7ba36455fcb2b5ea168a5bf6331b7b">inertia_angular</link>.z;
196 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a8512d209d48fdb9db5ada5584e41033b">damping_linear</link>.x;
197 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a8512d209d48fdb9db5ada5584e41033b">damping_linear</link>.y;
198 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a8512d209d48fdb9db5ada5584e41033b">damping_linear</link>.z;
199 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aad2dc5a6c218abdb8723023e6ea7aa40">damping_angular</link>.x;
200 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aad2dc5a6c218abdb8723023e6ea7aa40">damping_angular</link>.y;
201 &#32;&#32;&#32;&#32;damping.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1aad2dc5a6c218abdb8723023e6ea7aa40">damping_angular</link>.z;
202 
203 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1afbb443b8e3fe71ef58b0013fdb3d5674">setCartesianInertiaDamping</link>(inertia,&#32;damping);
204 
205 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a6acec93f53a7132d740aa0335a05a36d">force_min_linear</link>.x;
206 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a6acec93f53a7132d740aa0335a05a36d">force_min_linear</link>.y;
207 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a6acec93f53a7132d740aa0335a05a36d">force_min_linear</link>.z;
208 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1ab84d0d8b19f11eca2319c4ef903caafd">force_min_angular</link>.x;
209 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1ab84d0d8b19f11eca2319c4ef903caafd">force_min_angular</link>.y;
210 &#32;&#32;&#32;&#32;force_min.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1ab84d0d8b19f11eca2319c4ef903caafd">force_min_angular</link>.z;
211 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a89805bac05f838a5bc70a641539715f0">force_max_linear</link>.x;
212 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a89805bac05f838a5bc70a641539715f0">force_max_linear</link>.y;
213 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1a89805bac05f838a5bc70a641539715f0">force_max_linear</link>.z;
214 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1afa6dc239b7bd0cd6b43b4ccea1ec92af">force_max_angular</link>.x;
215 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1afa6dc239b7bd0cd6b43b4ccea1ec92af">force_max_angular</link>.y;
216 &#32;&#32;&#32;&#32;force_max.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>&#32;=&#32;req.<link linkend="df/db3/structjaco__msgs_1_1SetForceControlParamsRequest___1afa6dc239b7bd0cd6b43b4ccea1ec92af">force_max_angular</link>.z;
217 
218 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a39faaf774115561ea1857349db182145">setCartesianForceMinMax</link>(force_min,&#32;force_max);
219 
220 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
221 }
222 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a6c96a5dcf017d0b054048e7765cd3f38">223 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a6c96a5dcf017d0b054048e7765cd3f38">JacoArm::startForceControlCallback</link>(<link linkend="d3/ded/structjaco__msgs_1_1StartRequest__">jaco_msgs::Start::Request</link>&#32;&amp;req,&#32;<link linkend="df/dc7/structjaco__msgs_1_1StartResponse__">jaco_msgs::Start::Response</link>&#32;&amp;res)
224 {
225 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a00e5493dfbdcaab6c1a9bd388d3b839d">startForceControl</link>();
226 &#32;&#32;&#32;&#32;res.<link linkend="df/dc7/structjaco__msgs_1_1StartResponse___1ada6cfbcf90a2ab058b01adf0b079515c">start_result</link>&#32;=&#32;<emphasis class="stringliteral">&quot;Start&#32;force&#32;control&#32;requested.&quot;</emphasis>;
227 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
228 }
229 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a0ddc9f2458a2c5e17e095b03b72699dc">230 </link><emphasis class="keywordtype">bool</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0ddc9f2458a2c5e17e095b03b72699dc">JacoArm::stopForceControlCallback</link>(<link linkend="db/d9b/structjaco__msgs_1_1StopRequest__">jaco_msgs::Stop::Request</link>&#32;&amp;req,&#32;<link linkend="d3/d1d/structjaco__msgs_1_1StopResponse__">jaco_msgs::Stop::Response</link>&#32;&amp;res)
231 {
232 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a339cf31d88fdef6409340c82a35ecb53">stopForceControl</link>();
233 &#32;&#32;&#32;&#32;res.<link linkend="d3/d1d/structjaco__msgs_1_1StopResponse___1a9dc418ecf2ecbae176732d3fdf6e7b66">stop_result</link>&#32;=&#32;<emphasis class="stringliteral">&quot;Stop&#32;force&#32;control&#32;requested.&quot;</emphasis>;
234 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">return</emphasis>&#32;<emphasis class="keyword">true</emphasis>;
235 }
236 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a091f2eaffef84362f69e3b49482982db">237 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a091f2eaffef84362f69e3b49482982db">JacoArm::cartesianVelocityCallback</link>(<emphasis class="keyword">const</emphasis>&#32;geometry_msgs::TwistStampedConstPtr&amp;&#32;cartesian_vel)
238 {
239 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(!<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a872b8033cda5a9fe4ccdca2e89aa03d1">isStopped</link>())
240 &#32;&#32;&#32;&#32;{
241 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>&#32;=&#32;cartesian_vel-&gt;twist.linear.x;
242 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>&#32;=&#32;cartesian_vel-&gt;twist.linear.y;
243 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>&#32;=&#32;cartesian_vel-&gt;twist.linear.z;
244 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>&#32;=&#32;cartesian_vel-&gt;twist.angular.x;
245 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>&#32;=&#32;cartesian_vel-&gt;twist.angular.y;
246 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>&#32;=&#32;cartesian_vel-&gt;twist.angular.z;
247 
248 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2ad620e8551ca62db4077135597b6618">last_cartesian_vel_cmd_time_</link>&#32;=&#32;ros::Time().now();
249 
250 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(<link linkend="d3/d95/classjaco_1_1JacoArm_1a17701f668a0b3ea2accf6c5fb420e012">cartesian_vel_timer_flag_</link>&#32;==&#32;<emphasis class="keyword">false</emphasis>)
251 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
252 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a11e0ed71d6c21e5df7e88fd6ab61df95">cartesian_vel_timer_</link>.start();
253 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a17701f668a0b3ea2accf6c5fb420e012">cartesian_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">true</emphasis>;
254 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
255 &#32;&#32;&#32;&#32;}
256 }
257 
258 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a0effe31602b4af803cff1566a358fdfb">259 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0effe31602b4af803cff1566a358fdfb">JacoArm::cartesianVelocityTimer</link>(<emphasis class="keyword">const</emphasis>&#32;ros::TimerEvent&amp;)
260 {
261 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">double</emphasis>&#32;elapsed_time_seconds&#32;=&#32;ros::Time().now().toSec()&#32;-&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2ad620e8551ca62db4077135597b6618">last_cartesian_vel_cmd_time_</link>.toSec();
262 
263 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(elapsed_time_seconds&#32;&gt;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a822ad8d6fcc8719c5a090456998e832a">cartesian_vel_timeout_seconds_</link>)
264 &#32;&#32;&#32;&#32;{
265 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Cartesian&#32;vel&#32;timed&#32;out:&#32;%f&quot;</emphasis>,&#32;elapsed_time_seconds);
266 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a11e0ed71d6c21e5df7e88fd6ab61df95">cartesian_vel_timer_</link>.stop();
267 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a17701f668a0b3ea2accf6c5fb420e012">cartesian_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">false</emphasis>;
268 &#32;&#32;&#32;&#32;}
269 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>
270 &#32;&#32;&#32;&#32;{
271 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Cart&#32;vel&#32;timer&#32;(%f):&#32;%f,&#32;%f,&#32;%f,&#32;%f,&#32;%f,&#32;%f&quot;</emphasis>,&#32;elapsed_time_seconds,
272 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a212cc2dcae1697132fc31fa2f5d17269">X</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a12c2611c89445419b336e58815d87c7c">Y</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a14e196e4cb38c0ae7f4658b9b070b7fe">Z</link>,
273 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a39135e53155aa4025c40eeefbfd3b17c">ThetaX</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a4aef5897f4cdcf7ecc9df6804f844d46">ThetaY</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>.<link linkend="dd/d00/structCartesianInfo_1a2890c501f3b7b9479e12ad51f04f0a7f">ThetaZ</link>);
274 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a468352480a437cc2144c8d4d289815a5">setCartesianVelocities</link>(<link linkend="d3/d95/classjaco_1_1JacoArm_1a804e6400a10726f2ec0af9ec718bd0cf">cartesian_velocities_</link>);
275 &#32;&#32;&#32;&#32;}
276 }
277 
278 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a0897025ed2834e5802e504b64d67a88b">279 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a0897025ed2834e5802e504b64d67a88b">JacoArm::jointVelocityTimer</link>(<emphasis class="keyword">const</emphasis>&#32;ros::TimerEvent&amp;)
280 {
281 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">double</emphasis>&#32;elapsed_time_seconds&#32;=&#32;ros::Time().now().toSec()&#32;-&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a36758d949907e58807d6d4c3792a01df">last_joint_vel_cmd_time_</link>.toSec();
282 
283 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(elapsed_time_seconds&#32;&gt;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac27941dace9da942beeff70926cc736e">joint_vel_timeout_seconds_</link>)
284 &#32;&#32;&#32;&#32;{
285 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Joint&#32;vel&#32;timed&#32;out:&#32;%f&quot;</emphasis>,&#32;elapsed_time_seconds);
286 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1ac4ad9c07f3a173e89d6767ec7a2dba12">joint_vel_timer_</link>.stop();
287 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a27effbbd66cd47378b49995cf80b8ffb">joint_vel_timer_flag_</link>&#32;=&#32;<emphasis class="keyword">false</emphasis>;
288 &#32;&#32;&#32;&#32;}
289 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">else</emphasis>
290 &#32;&#32;&#32;&#32;{
291 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ROS_DEBUG(<emphasis class="stringliteral">&quot;Joint&#32;vel&#32;timer&#32;(%f):&#32;%f,&#32;%f,&#32;%f,&#32;%f,&#32;%f,&#32;%f&quot;</emphasis>,&#32;elapsed_time_seconds,
292 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a5fc555c085bddc82c33a3039fbc40932">Actuator1</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1ab7b9349eef239f9741d9c28a795e4c35">Actuator2</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a30426eab94c82cfd3d697bbc8c506c2a">Actuator3</link>,
293 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a46a1314c4846de6a495310b44fe5e0c3">Actuator4</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1a953c29d2481eb1c42c84e9c992d34dde">Actuator5</link>,&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>.<link linkend="d0/df5/structAngularInfo_1ab54771129d8a9e451c27942dd349340d">Actuator6</link>);
294 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1af269b1c8d8b1f32c1003ca2e464252f0">setJointVelocities</link>(<link linkend="d3/d95/classjaco_1_1JacoArm_1a640c8142aa9ab07ea9c2a3d7c5eb74cb">joint_velocities_</link>);
295 &#32;&#32;&#32;&#32;}
296 }
297 
298 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a238a888aa46e98fcae569bf942d61e32">310 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a238a888aa46e98fcae569bf942d61e32">JacoArm::publishJointAngles</link>(<emphasis class="keywordtype">void</emphasis>)
311 {
312 &#32;&#32;&#32;&#32;<link linkend="dd/d28/classjaco_1_1FingerAngles">FingerAngles</link>&#32;fingers;
313 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a7644bf1154b59bf4d8b97c200284e3fb">getFingerPositions</link>(fingers);
314 
315 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Query&#32;arm&#32;for&#32;current&#32;joint&#32;angles</emphasis>
316 &#32;&#32;&#32;&#32;<link linkend="d4/de6/classjaco_1_1JacoAngles">JacoAngles</link>&#32;current_angles;
317 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a5fcb23bf6925a82f2ab5e42460ea3834">getJointAngles</link>(current_angles);
318 &#32;&#32;&#32;&#32;<link linkend="d7/dda/structjaco__msgs_1_1JointAngles__">jaco_msgs::JointAngles</link>&#32;jaco_angles&#32;=&#32;current_angles.<link linkend="d4/de6/classjaco_1_1JacoAngles_1a29e69c52bf777084006965f9edcdcd9d">constructAnglesMsg</link>();
319 
320 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1a5ebadd874f74af99d452dc42787489b7">joint1</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1a5fc555c085bddc82c33a3039fbc40932">Actuator1</link>;
321 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ad7bfb312caeafc6b2cb1fc02c6a3e116">joint2</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1ab7b9349eef239f9741d9c28a795e4c35">Actuator2</link>;
322 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ae8e5d407b34f0a6acd368ec1a28df526">joint3</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1a30426eab94c82cfd3d697bbc8c506c2a">Actuator3</link>;
323 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1accb31f45f3a313794a9cab57b8a9b952">joint4</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1a46a1314c4846de6a495310b44fe5e0c3">Actuator4</link>;
324 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ad02e456e0b382b2bf59b4eeb93318921">joint5</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1a953c29d2481eb1c42c84e9c992d34dde">Actuator5</link>;
325 &#32;&#32;&#32;&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1a474d9f2a0e329ba6bd08c8fa265e9a50">joint6</link>&#32;=&#32;current_angles.<link linkend="d0/df5/structAngularInfo_1ab54771129d8a9e451c27942dd349340d">Actuator6</link>;
326 
327 &#32;&#32;&#32;&#32;sensor_msgs::JointState&#32;joint_state;
328 &#32;&#32;&#32;&#32;joint_state.name&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9a6611a10119b2651aa96eb21ecd10ad">joint_names_</link>;
329 &#32;&#32;&#32;&#32;joint_state.header.stamp&#32;=&#32;ros::Time::now();
330 
331 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Transform&#32;from&#32;Kinova&#32;DH&#32;algorithm&#32;to&#32;physical&#32;angles&#32;in&#32;radians,&#32;then&#32;place&#32;into&#32;vector&#32;array</emphasis>
332 &#32;&#32;&#32;&#32;joint_state.position.resize(9);
333 
334 &#32;&#32;&#32;&#32;<emphasis class="keywordtype">double</emphasis>&#32;j6o&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1af20323ed50f73b59bac3e18ebd8559fa">robotType</link>()&#32;==&#32;2&#32;?&#32;270.0&#32;:&#32;260.0;
335 &#32;&#32;&#32;&#32;joint_state.position[0]&#32;=&#32;(180-&#32;jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1a5ebadd874f74af99d452dc42787489b7">joint1</link>)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
336 &#32;&#32;&#32;&#32;joint_state.position[1]&#32;=&#32;(jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ad7bfb312caeafc6b2cb1fc02c6a3e116">joint2</link>&#32;-&#32;j6o)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
337 &#32;&#32;&#32;&#32;joint_state.position[2]&#32;=&#32;(90-jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ae8e5d407b34f0a6acd368ec1a28df526">joint3</link>)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
338 &#32;&#32;&#32;&#32;joint_state.position[3]&#32;=&#32;(180-jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1accb31f45f3a313794a9cab57b8a9b952">joint4</link>)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
339 &#32;&#32;&#32;&#32;joint_state.position[4]&#32;=&#32;(180-jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1ad02e456e0b382b2bf59b4eeb93318921">joint5</link>)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
340 &#32;&#32;&#32;&#32;joint_state.position[5]&#32;=&#32;(270-jaco_angles.<link linkend="d7/dda/structjaco__msgs_1_1JointAngles___1a474d9f2a0e329ba6bd08c8fa265e9a50">joint6</link>)&#32;*&#32;(<link linkend="d9/d79/jaco__arm_8cpp_1a598a3330b3c21701223ee0ca14316eca">PI</link>&#32;/&#32;180);
341 &#32;&#32;&#32;&#32;joint_state.position[6]&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a45f8b1fbeec4d1abfcad6d3f9e65b6ca">finger_conv_ratio_</link>&#32;*&#32;fingers.<link linkend="df/d1b/structFingersPosition_1a216f8d64e6a9c7aab84e4269ccb27e66">Finger1</link>;
342 &#32;&#32;&#32;&#32;joint_state.position[7]&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a45f8b1fbeec4d1abfcad6d3f9e65b6ca">finger_conv_ratio_</link>&#32;*&#32;fingers.<link linkend="df/d1b/structFingersPosition_1a0ec9675672721d61fb13bbc2db3d3ef9">Finger2</link>;
343 &#32;&#32;&#32;&#32;joint_state.position[8]&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a45f8b1fbeec4d1abfcad6d3f9e65b6ca">finger_conv_ratio_</link>&#32;*&#32;fingers.<link linkend="df/d1b/structFingersPosition_1a03c819e4c20367e36e62a864bf829160">Finger3</link>;
344 
345 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Joint&#32;velocities</emphasis>
346 &#32;&#32;&#32;&#32;<link linkend="d4/de6/classjaco_1_1JacoAngles">JacoAngles</link>&#32;current_vels;
347 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1aa81b5cdf89bd2c7259be3638fdb4f75a">getJointVelocities</link>(current_vels);
348 &#32;&#32;&#32;&#32;joint_state.velocity.resize(9);
349 &#32;&#32;&#32;&#32;joint_state.velocity[0]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1a5fc555c085bddc82c33a3039fbc40932">Actuator1</link>;
350 &#32;&#32;&#32;&#32;joint_state.velocity[1]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1ab7b9349eef239f9741d9c28a795e4c35">Actuator2</link>;
351 &#32;&#32;&#32;&#32;joint_state.velocity[2]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1a30426eab94c82cfd3d697bbc8c506c2a">Actuator3</link>;
352 &#32;&#32;&#32;&#32;joint_state.velocity[3]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1a46a1314c4846de6a495310b44fe5e0c3">Actuator4</link>;
353 &#32;&#32;&#32;&#32;joint_state.velocity[4]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1a953c29d2481eb1c42c84e9c992d34dde">Actuator5</link>;
354 &#32;&#32;&#32;&#32;joint_state.velocity[5]&#32;=&#32;current_vels.<link linkend="d0/df5/structAngularInfo_1ab54771129d8a9e451c27942dd349340d">Actuator6</link>;
355 
356 &#32;&#32;&#32;&#32;ROS_DEBUG_THROTTLE(0.1,
357 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="stringliteral">&quot;Raw&#32;joint&#32;velocities:&#32;%f&#32;%f&#32;%f&#32;%f&#32;%f&#32;%f&quot;</emphasis>,
358 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[0],
359 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[1],
360 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[2],
361 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[3],
362 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[4],
363 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.velocity[5]);
364 
365 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(<link linkend="d3/d95/classjaco_1_1JacoArm_1a20deb1358ca2385fcf9dca3f0f771409">convert_joint_velocities_</link>)&#32;{
366 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(joint_state.velocity);
367 &#32;&#32;&#32;&#32;}
368 
369 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;No&#32;velocity&#32;for&#32;the&#32;fingers:</emphasis>
370 &#32;&#32;&#32;&#32;joint_state.velocity[6]&#32;=&#32;0.0;
371 &#32;&#32;&#32;&#32;joint_state.velocity[7]&#32;=&#32;0.0;
372 &#32;&#32;&#32;&#32;joint_state.velocity[8]&#32;=&#32;0.0;
373 
374 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Joint&#32;torques&#32;(effort)</emphasis>
375 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;NOTE:&#32;Currently&#32;invalid.</emphasis>
376 &#32;&#32;&#32;&#32;<link linkend="d4/de6/classjaco_1_1JacoAngles">JacoAngles</link>&#32;joint_tqs;
377 &#32;&#32;&#32;&#32;joint_state.effort.resize(9);
378 &#32;&#32;&#32;&#32;joint_state.effort[0]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1a5fc555c085bddc82c33a3039fbc40932">Actuator1</link>;
379 &#32;&#32;&#32;&#32;joint_state.effort[1]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1ab7b9349eef239f9741d9c28a795e4c35">Actuator2</link>;
380 &#32;&#32;&#32;&#32;joint_state.effort[2]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1a30426eab94c82cfd3d697bbc8c506c2a">Actuator3</link>;
381 &#32;&#32;&#32;&#32;joint_state.effort[3]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1a46a1314c4846de6a495310b44fe5e0c3">Actuator4</link>;
382 &#32;&#32;&#32;&#32;joint_state.effort[4]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1a953c29d2481eb1c42c84e9c992d34dde">Actuator5</link>;
383 &#32;&#32;&#32;&#32;joint_state.effort[5]&#32;=&#32;joint_tqs.<link linkend="d0/df5/structAngularInfo_1ab54771129d8a9e451c27942dd349340d">Actuator6</link>;
384 &#32;&#32;&#32;&#32;joint_state.effort[6]&#32;=&#32;0.0;
385 &#32;&#32;&#32;&#32;joint_state.effort[7]&#32;=&#32;0.0;
386 &#32;&#32;&#32;&#32;joint_state.effort[8]&#32;=&#32;0.0;
387 
388 &#32;&#32;&#32;&#32;ROS_DEBUG_THROTTLE(0.1,
389 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis class="stringliteral">&quot;Raw&#32;joint&#32;torques:&#32;%f&#32;%f&#32;%f&#32;%f&#32;%f&#32;%f&quot;</emphasis>,
390 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[0],
391 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[1],
392 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[2],
393 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[3],
394 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[4],
395 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joint_state.effort[5]);
396 
397 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a074f24a17f50b88921a9bc9d8e52c09b">joint_angles_publisher_</link>.publish(jaco_angles);
398 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a914eb71a6de747a2e63b880b2a0ac0b4">joint_state_publisher_</link>.publish(joint_state);
399 }
400 
401 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a91106f68edeff4b26d02a6d7a8528df6">405 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a91106f68edeff4b26d02a6d7a8528df6">JacoArm::publishToolPosition</link>(<emphasis class="keywordtype">void</emphasis>)
406 {
407 &#32;&#32;&#32;&#32;<link linkend="dd/da4/classjaco_1_1JacoPose">JacoPose</link>&#32;pose;
408 &#32;&#32;&#32;&#32;geometry_msgs::PoseStamped&#32;current_position;
409 
410 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a855bbefed2093d0d0cc7763eb7306a0b">getCartesianPosition</link>(pose);
411 
412 &#32;&#32;&#32;&#32;current_position.pose&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;pose.<link linkend="dd/da4/classjaco_1_1JacoPose_1a9f2e68a94240e365afefd84d92f5a132">constructPoseMsg</link>();
413 &#32;&#32;&#32;&#32;current_position.header.stamp&#32;&#32;&#32;&#32;=&#32;ros::Time::now();
414 &#32;&#32;&#32;&#32;current_position.header.frame_id&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a4f7d75d1cfcf82b4221e6bd6e4412cf9">tf_prefix_</link>&#32;+&#32;<emphasis class="stringliteral">&quot;link_base&quot;</emphasis>;
415 
416 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a9d6b0687a753f44ecdb2e93aeeddd288">tool_position_publisher_</link>.publish(current_position);
417 }
418 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a91d14ff9734d5941167ba0ec13ec3e36">422 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a91d14ff9734d5941167ba0ec13ec3e36">JacoArm::publishToolWrench</link>(<emphasis class="keywordtype">void</emphasis>)
423 {
424 &#32;&#32;&#32;&#32;<link linkend="dd/da4/classjaco_1_1JacoPose">JacoPose</link>&#32;wrench;
425 &#32;&#32;&#32;&#32;geometry_msgs::WrenchStamped&#32;current_wrench;
426 
427 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1af181d7ddd7baeff6e46720648e7e1f31">getCartesianForce</link>(wrench);
428 
429 &#32;&#32;&#32;&#32;current_wrench.wrench&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;wrench.<link linkend="dd/da4/classjaco_1_1JacoPose_1a0ce9524097d0c974210ab20e63049b1c">constructWrenchMsg</link>();
430 &#32;&#32;&#32;&#32;current_wrench.header.stamp&#32;&#32;&#32;&#32;=&#32;ros::Time::now();
431 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;TODO:&#32;Rotate&#32;wrench&#32;to&#32;fit&#32;the&#32;end&#32;effector&#32;frame.</emphasis>
432 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Right&#32;now,&#32;the&#32;orientation&#32;of&#32;the&#32;wrench&#32;is&#32;in&#32;the&#32;API&apos;s&#32;(base)&#32;frame.</emphasis>
433 &#32;&#32;&#32;&#32;current_wrench.header.frame_id&#32;=&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a4f7d75d1cfcf82b4221e6bd6e4412cf9">tf_prefix_</link>&#32;+&#32;<emphasis class="stringliteral">&quot;api_origin&quot;</emphasis>;
434 
435 
436 &#32;&#32;&#32;&#32;<emphasis class="comment">//&#32;Same&#32;conversion&#32;issue&#32;as&#32;with&#32;velocities:</emphasis>
437 &#32;&#32;&#32;&#32;<emphasis class="keywordflow">if</emphasis>&#32;(<link linkend="d3/d95/classjaco_1_1JacoArm_1a20deb1358ca2385fcf9dca3f0f771409">convert_joint_velocities_</link>)&#32;{
438 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="dd/d9e/namespaceanonymous__namespace_02jaco__arm_8cpp_03_1a048a0e37d623243283fd93360d041e2b">convertKinDeg</link>(current_wrench.wrench.torque);
439 &#32;&#32;&#32;&#32;}
440 
441 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1abff4dc1bbe63e0be7cd20ac7c4d37be4">tool_wrench_publisher_</link>.publish(current_wrench);
442 }
443 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a978feb8b29f9ef7d6d42596984e1962a">447 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a978feb8b29f9ef7d6d42596984e1962a">JacoArm::publishFingerPosition</link>(<emphasis class="keywordtype">void</emphasis>)
448 {
449 &#32;&#32;&#32;&#32;<link linkend="dd/d28/classjaco_1_1FingerAngles">FingerAngles</link>&#32;fingers;
450 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a2f9cbba855994058b82c0f4628349286">jaco_comm_</link>.<link linkend="d5/d2b/classjaco_1_1JacoComm_1a7644bf1154b59bf4d8b97c200284e3fb">getFingerPositions</link>(fingers);
451 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a323990f9bd26de33240df3f107e29a49">finger_position_publisher_</link>.publish(fingers.<link linkend="dd/d28/classjaco_1_1FingerAngles_1afe84a9beae8b4a0617ace657d7608a49">constructFingersMsg</link>());
452 }
453 
454 
<link linkend="d3/d95/classjaco_1_1JacoArm_1a3a04586ffe92b995c58c9fa94a030bf8">455 </link><emphasis class="keywordtype">void</emphasis>&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a3a04586ffe92b995c58c9fa94a030bf8">JacoArm::statusTimer</link>(<emphasis class="keyword">const</emphasis>&#32;ros::TimerEvent&amp;)
456 {
457 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a238a888aa46e98fcae569bf942d61e32">publishJointAngles</link>();
458 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a91106f68edeff4b26d02a6d7a8528df6">publishToolPosition</link>();
459 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a91d14ff9734d5941167ba0ec13ec3e36">publishToolWrench</link>();
460 &#32;&#32;&#32;&#32;<link linkend="d3/d95/classjaco_1_1JacoArm_1a978feb8b29f9ef7d6d42596984e1962a">publishFingerPosition</link>();
461 }
462 
463 }&#32;&#32;<emphasis class="comment">//&#32;namespace&#32;jaco</emphasis>
    </computeroutput></literallayout>
</section>
